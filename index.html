<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Document Verification - Replica</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css">
  <style>
    body {
      background: #ffffff;
      font-family: Helvetica, Arial, sans-serif;
      padding: 20px
    }

    .header-bar {
      background: #555555;
      color: #ffffff;
      padding: 12px 18px;
      border-radius: 3px;
      font-weight: 700
    }

    .sub-panel {
      background: #efefef;
      border-radius: 3px;
      padding: 12px;
      margin-top: 10px
    }

    .app-info {
      font-size: 14px
    }

    .stats {
      margin-top: 8px
    }

    .stat-item {
      display: inline-block;
      margin-right: 18px;
    }

    .stat-dot {
      width: 14px;
      height: 14px;
      border-radius: 50%;
      display: inline-block;
      margin-right: 6px;
      vertical-align: middle
    }

    .stat-pending {
      color: #f1c40f
    }

    .stat-approved {
      color: #2ecc71
    }

    .stat-rejected {
      color: #e74c3c
    }

    .tab-section {
      background: #555555;
      padding: 12px;
      border-radius: 3px;
      margin-top: 16px
    }

    .nav-tabs>li>a {
      color: #fff;
      background: transparent;
      border: 1px solid #ccc !important;
      border-radius: 3px;
      font-weight: 400;
    }

    .nav-tabs>li.active>a,
    .nav-tabs>li.active>a:focus,
    .nav-tabs>li.active>a:hover {
      background: #fff;
      color: #000 !important;
      border: 1px solid #ccc !important;
      border-radius: 3px;
      font-weight: 400;
    }

    .card {
      background: #fff;
      border-radius: 3px;
      margin-top: 12px;
      padding: 0;
      border: 1px solid #ccc
    }

    .card .card-header {
      background: #efefef;
      color: #333;
      padding: 10px 14px;
      border-radius: 3px 3px 0 0;
      font-weight: 700
    }

    .doc-entry {
      padding: 14px
    }

    .doc-entry a {
      font-weight: 700;
      text-decoration: underline
    }

    .doc-meta {
      color: #666;
      margin-top: 6px
    }

    .label-approved {
      color: #27ae60;
      font-weight: 700
    }

    .move-btn {
      margin-top: 18px;
      background: #efefef !important;
      color: #333 !important;
      border: 1px solid #333 !important;
      font-weight: 600
    }

    .file-icon {
      float: right;
      font-size: 18px;
      color: #111;
      margin-top: 6px
    }

    .doc-entry .checkbox {
      display: inline-block;
      margin-right: 10px
    }

    .preview-wrap {
      max-width: 1100px;
      margin: 0 auto
    }

    .small-muted {
      color: #999;
      font-size: 12px
    }

    .received {
      font-weight: 600
    }

    .panel-space {
      height: 16px
    }

    .sub-panel.row {
      margin-left: 0 !important;
      margin-right: 0 !important;
    }

    /* New styles for extracted fields */
    .field-container {
      border: 1px solid #ddd;
      border-radius: 4px;
      margin-bottom: 10px;
      background: white;
      position: relative;
    }

    .field-label {
      padding: 8px 12px 0 12px;
      font-size: 13px;
      color: #333;
      font-weight: bold;
      display: flex;
      flex-wrap: wrap;
      justify-content: space-between;
      align-content: center;
    }

    .field-value-container {
      padding: 12px;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .field-value {
      font-weight: 500;
      color: #333;
    }

    .confidence-container {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .confidence-percentage {
      font-weight: bold;
      font-size: 13px;
      color: #bbb9b9;
    }

    .extracted-fields-container {
      background: #f8f9fa;
      border: 1px solid #e9ecef;
      border-radius: 4px;
      padding: 15px;
    }

    .reject-options,
    .approve-options {
      margin-top: 15px;
      padding: 15px;
      background: #f9f9f9;
      border: 1px solid #ddd;
      border-radius: 4px;
      display: none;
    }

    .reject-options h5,
    .approve-options h5 {
      margin-top: 0;
      margin-bottom: 15px;
      font-weight: bold;
    }

    .reject-options h5 {
      color: #d9534f;
    }

    .approve-options h5 {
      color: #5cb85c;
    }

    .reject-options label,
    .approve-options label {
      font-weight: normal;
      margin-bottom: 8px;
      display: block;
    }

    .reject-options input[type="radio"] {
      margin-right: 8px;
    }

    .asterisk-required {
      color: red;
      font-size: 7px;
    }

    /* Confirmation bubble styles */
    .confirmation-bubble {
      position: absolute;
      bottom: 50px;
      left: 0;
      background: #fff;
      border: 1px solid #ccc;
      padding: 12px 14px;
      border-radius: 8px;
      box-shadow: 0px 3px 10px rgba(0, 0, 0, 0.15);
      font-size: 14px;
      z-index: 10;
      width: 280px;
      opacity: 0;
      transform: translateY(10px);
      transition: opacity 0.3s ease, transform 0.3s ease;
      display: none;
    }

    .confirmation-bubble.show {
      opacity: 1;
      transform: translateY(0);
      display: block;
    }

    .confirmation-bubble::after {
      content: "";
      position: absolute;
      bottom: -24px;
      left: 20px;
      border-width: 12px;
      border-style: solid;
      border-color: #fff transparent transparent transparent;
      filter: drop-shadow(0px 2px 3px rgba(0, 0, 0, 0.2));
    }

    .confirmation-bubble-right {
      position: absolute;
      bottom: 50px;
      right: 0;
      background: #fff;
      border: 1px solid #ccc;
      padding: 12px 14px;
      border-radius: 8px;
      box-shadow: 0px 3px 10px rgba(0, 0, 0, 0.15);
      font-size: 14px;
      z-index: 10;
      width: 280px;
      opacity: 0;
      transform: translateY(10px);
      transition: opacity 0.3s ease, transform 0.3s ease;
      display: none;
    }

    .confirmation-bubble-right.show {
      opacity: 1;
      transform: translateY(0);
      display: block;
    }

    .confirmation-bubble-right::after {
      content: "";
      position: absolute;
      bottom: -24px;
      right: 20px;
      border-width: 12px;
      border-style: solid;
      border-color: #fff transparent transparent transparent;
      filter: drop-shadow(0px 2px 3px rgba(0, 0, 0, 0.2));
    }

    /* Move Documents Section Styles */
    .move-documents-section {
      margin-top: 20px;
      margin-bottom: 30px;
      display: none;
    }

    .application-compare-row {
      display: flex;
      gap: 20px;
      margin-bottom: 20px;
    }

    .application-compare-col {
      flex: 0 1 auto;
    }

    /* Note row styles */
    .note-row {
      display: none;
    }

    .note-content {
      font-size: 14px;
      line-height: 1.5;
      color: #333;
      opacity: 0;
      transform: translateY(-10px);
      transition: opacity 0.3s ease, transform 0.3s ease;
      background-color: #f5f5f5;
      padding: 15px;
      border: 1px solid #ddd;
      border-radius: 4px;
    }

    .note-content.show {
      opacity: 1;
      transform: translateY(0);
    }

    /* Enhanced button states */
    .btn-disabled {
      opacity: 0.6;
      cursor: not-allowed;
    }

    /* Badge styles */
    .confidence-badge {
      display: inline-block;
      padding: 4px 12px;
      border-radius: 12px;
      font-size: 11px;
      font-weight: bold;
      color: white;
      background-color: #28a745;
    }

    .status-badge {
      display: inline-block;
      padding: 3px 8px;
      border-radius: 12px;
      font-size: 11px;
      font-weight: 600;
      margin-left: 8px;
    }

    .badge-match {
      background-color: #d4edda;
      color: #155724;
      border: 1px solid #c3e6cb;
    }

    .badge-mismatch {
      background-color: #f8d7da;
      color: #721c24;
      border: 1px solid #f1b0b7;
    }

    .badge-information {
      background-color: #d1ecf1;
      color: #0c5460;
      border: 1px solid #bee5eb;
    }
  </style>
</head>

<body>
  <div class="preview-wrap">
    <!-- Header -->
    <div class="header-bar">Document Verification and Review</div>

    <div class="sub-panel row">
      <div class="col-sm-12 app-info" style="margin-bottom:8px;">
        <strong>Application Id: </strong>5588731 &nbsp;&nbsp;&nbsp; <strong>Name:</strong> Kelley
      </div>
      <div class="col-sm-12 stats" style="display:flex; gap:24px; align-items:center;">
        <span class="stat-item"><i class="bi bi-clock-fill stat-pending"></i> Pending: 2</span>
        <span class="stat-item"><i class="bi bi-check-circle-fill stat-approved"></i> Approved: 3</span>
        <span class="stat-item"><i class="bi bi-x-circle-fill stat-rejected"></i> Rejected: 3</span>
      </div>
    </div>

    <!-- Section1 -->
    <div class="sub-panel" id="section1" style="background:#efefef; margin-top:16px; padding:16px; border-radius:3px;">
      <div id="section2" style="background:#ffffff; border-radius:3px; padding:0; border:1px solid #ccc;">
        <div style="background:#555555; color:#fff; padding:10px 14px; border-radius:3px 3px 0 0; font-weight:700;">
          <ul class="nav nav-tabs" role="tablist" style="border:none; margin:0;">
            <li role="presentation" class="active"><a href="#" style="color:#fff; border:none;">Pending (2)</a></li>
            <li role="presentation"><a href="#" style="color:#fff; border:none;">Approved (3)</a></li>
            <li role="presentation"><a href="#" style="color:#fff; border:none;">Rejected (3)</a></li>
          </ul>
        </div>
        <div style="padding:20px; background:#ffffff; min-height:600px;">

          <!-- Pending Tab Content -->
          <div id="pendingContent" style="display:block;">
            <!-- Document Review Replica Layout (Side-by-side) -->
            <div class="row" style="margin:0; padding:0; border:1px solid #ccc; border-radius:3px;">
              <!-- LEFT: Document Preview -->
              <div class="col-sm-7" style="background:#f9f9f9; padding:15px; min-height:550px; padding-right:15px;">
                <div style="display: flex; justify-content: space-between;">
                  <h5 style="margin-top:0; font-weight:600; font-size: 15px;">Document Preview <i
                      class="bi bi-box-arrow-up-right" style="cursor: pointer; padding: 10px;"></i>
                  </h5>
                  <div
                    style="font-size:12px; background:#dfdfdf; border-radius: 30px; width: 20%; align-content: center; border:1px solid #cecdcd;">
                    <span
                      style="display:flex; justify-content:center; align-items:center; width:100%; font-size:14px;">Pending
                      1 of 2</span>
                  </div>
                </div>
                <div
                  style="text-align:center; border:1px solid #ddd; margin-top:10px; padding:10px; background:white; height:487px;">
                  <div style="font-size: 17px; color:#bbb9b9; margin-top:200px;">
                    <p>[DOCUMENT IMAGE]</p>
                  </div>
                </div>
              </div>

              <!-- RIGHT: Extracted Fields -->
              <div class="col-sm-5" style="background:#f9f9f9; padding:15px; min-height:550px;">
                <h5 style="margin-top:0; font-weight:600; margin-bottom: 20px; font-size: 15px;">Extracted Fields</h5>



                <!-- Document Type Dropdown -->
                <div class="field-container">
                  <div class="field-label">
                    Document Type
                    <div style="margin-bottom: 15px;">
                      <span class="confidence-badge">99% Confident</span>
                    </div>
                  </div>
                  <div class="field-value-container" style="padding: 0 12px 12px 12px !important;">
                    <select class="form-control" style="background:transparent; padding:0;">
                      <option selected>Drivers License</option>
                      <option>Social Security Card</option>
                      <option>Lien Release</option>
                    </select>
                  </div>
                </div>

                <!-- First Name -->
                <div class="field-container">
                  <div class="field-label">
                    First Name
                    <span class="status-badge badge-match">Match</span>
                  </div>
                  <div class="field-value-container">
                    <div class="field-value">John D. Williams</div>
                    <div class="confidence-container">
                      <span class="confidence-percentage">98%</span>
                    </div>
                  </div>
                </div>

                <!-- SSN -->
                <div class="field-container">
                  <div class="field-label">
                    SSN
                    <span class="status-badge badge-mismatch">Mis-Match</span>
                  </div>
                  <div class="field-value-container">
                    <div class="field-value">983-99-8568</div>
                    <div class="confidence-container">
                      <span class="confidence-percentage">92%</span>
                    </div>
                  </div>
                </div>

                <!-- Date of Birth -->
                <div class="field-container">
                  <div class="field-label">
                    Date of Birth
                    <span class="status-badge badge-information">Information</span>
                  </div>
                  <div class="field-value-container">
                    <div class="field-value">12-14-1987</div>
                    <div class="confidence-container">
                      <span class="confidence-percentage">96%</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Reject Options (hidden by default) -->
            <div class="reject-options" id="rejectOptions">
              <div class="field-label" style="padding: 0 !important;">Rejection Reason</div>
              <div class="field-value-container" style="padding: 8px 0 0 0;">
                <select class="form-control" id="rejectionReasonSelect" style="padding:0;">
                  <option value="">Select a rejection reason...</option>
                  <optgroup label="Document Quality Issues">
                    <option value="poor_image_quality">Poor image quality/illegible text</option>
                    <option value="blurry_document">Document is blurry or out of focus</option>
                    <option value="partial_document">Partial document/information cut off</option>
                    <option value="damaged_document">Document appears damaged or torn</option>
                    <option value="low_resolution">Image resolution too low to verify details</option>
                  </optgroup>
                  <optgroup label="Document Validity Issues">
                    <option value="expired_document">Document has expired</option>
                    <option value="altered_document">Document appears altered or tampered with</option>
                    <option value="fraudulent_document">Suspected fraudulent document</option>
                    <option value="invalid_format">Document format not acceptable</option>
                    <option value="security_features_missing">Required security features missing</option>
                  </optgroup>
                  <optgroup label="Other">
                    <option value="other">Other</option>
                  </optgroup>
                </select>
              </div>
              <div class="form-group" style="margin-top:20px;">
                <label>Funder Note <sup><i class="bi bi-asterisk asterisk-required"></i></sup></label>
                <textarea class="form-control" id="funderNoteReject" style="height:120px;"></textarea>
              </div>
              <div class="form-group" style="margin-top:20px;">
                <label>Customer Note <sup><i class="bi bi-asterisk asterisk-required"></i></sup></label>
                <textarea class="form-control" id="customerNoteReject" style="height:120px;"></textarea>
              </div>
            </div>

            <!-- Approve Options (hidden by default) -->
            <div class="approve-options" id="approveOptions">
              <div class="form-group">
                <label>Funder Note</label>
                <textarea class="form-control" id="funderNoteApprove" style="height:120px;"></textarea>
              </div>
            </div>

            <div class="text-right" style="margin-top: 10px; color: #4c555dbf;">Next document will load automatically
              after your decision.
            </div>

            <!-- Buttons -->
            <div style="text-align:center; margin-top:20px;">
              <button class="btn btn-default" id="cancelBtn" style="display:none;">Cancel</button>
              <button class="btn" style="background-color: #555555; color: white; font-weight: bold;"
                id="rejectBtn">Reject</button>
              <button class="btn" style="background-color: #555555; color: white; font-weight: bold;"
                id="approveBtn">Approve</button>
            </div>
          </div>

          <!-- Approved Tab Content -->
          <div id="approvedContent" style="display:none;">
            <div style="margin-bottom: 20px; text-align: right;">
              <div style="position: relative; display: inline-block; margin-right: 10px;">
                <button class="btn btn-default" id="moveDocumentsBtn" onclick="showMoveDocumentsBubble()" disabled
                  style="border: 1px solid #337ab7; color: #337ab7; opacity: 0.6; background-color: #cce7ff; font-weight: bold;">Move
                  Documents</button>
                <!-- Move Documents Confirmation bubble -->
                <div id="moveDocumentsBubble" class="confirmation-bubble" style="display:none;">
                  <div id="moveDocumentsText">Move selected documents to another application?</div>
                  <div style="margin-top: 10px; text-align: right;">
                    <button class="btn btn-sm" style="background-color: #6c757d; color: white; margin-right: 5px;"
                      onclick="cancelMoveDocuments()">Cancel</button>
                    <button class="btn btn-sm" style="background-color: #5cb85c; color: white;"
                      onclick="executeMoveDocuments()">Confirm</button>
                  </div>
                </div>
              </div>
              <div style="position: relative; display: inline-block;">
                <button class="btn btn-default" id="returnToFaxesBtn" onclick="showReturnToFaxesBubble()" disabled
                  style="border: 1px solid #337ab7; color: #337ab7; opacity: 0.6; background-color: #cce7ff; font-weight: bold;">Return
                  to
                  Faxes/Pending
                  Status</button>
                <!-- Return to Faxes Confirmation bubble -->
                <div id="returnToFaxesBubble" class="confirmation-bubble-right" style="display:none;">
                  <div>Return selected documents to Faxes/Pending status?</div>
                  <div style="margin-top: 10px; text-align: right;">
                    <button class="btn btn-sm" style="background-color: #6c757d; color: white; margin-right: 5px;"
                      onclick="cancelReturnToFaxes()">Cancel</button>
                    <button class="btn btn-sm" style="background-color: #5cb85c; color: white;"
                      onclick="executeReturnToFaxes()">Confirm</button>
                  </div>
                </div>
              </div>
            </div>

            <!-- Move Documents Section -->
            <div id="moveDocumentsSection" class="move-documents-section">
              <div style="background: white; border: 1px solid #ddd; border-radius: 4px; padding: 20px;">
                <div style="margin-bottom: 15px;">
                  <strong id="moveDocumentsTitle" style="font-size: 16px;">Move documents to a new application.</strong>
                </div>
                <div style="margin-bottom: 20px;">
                  <div style="display: flex; gap: 10px; align-items: center;">
                    <input type="text" class="form-control" id="targetApplicationId"
                      placeholder="Enter Target Application ID" style="flex: 1;">
                    <button class="btn btn-primary" onclick="validateApplication()"
                      style="background-color: #337ab7; border-color: #337ab7;">Validate</button>
                    <button class="btn btn-default" onclick="cancelMoveDocuments()">Cancel</button>
                  </div>
                </div>

                <!-- Application Comparison Section -->
                <div id="applicationComparisonSection" style="display:none;">

                  <div class="application-compare-row">

                    <!-- LEFT: CURRENT APP -->
                    <div class="application-compare-col">
                      <div style="font-weight: bold; font-size: 14px; margin-bottom: 15px;">
                        Current App: <span id="currentAppId">5819998</span>
                      </div>

                      <div style="margin-bottom: 15px;">
                        <div style="font-weight: bold; margin-bottom: 8px;">Applicant Information:</div>

                        <div style="margin-bottom: 4px;">
                          <strong>Name:</strong> <span id="currentAppName">Sbnzbd v Glmrlut</span>
                        </div>

                        <div style="margin-bottom: 15px;">
                          <strong>SSN:</strong> <span id="currentAppSSN">666-15-3951</span>
                        </div>

                        <div style="font-weight: bold; margin-bottom: 8px;">Co-Applicant Information:</div>

                        <div style="margin-bottom: 4px;">
                          <strong>Name:</strong> <span id="currentCoAppName">Uyldqv w Bjqzhqq</span>
                        </div>

                        <div>
                          <strong>SSN:</strong> <span id="currentCoAppSSN">666-42-4024</span>
                        </div>
                      </div>
                    </div>

                    <!-- RIGHT: TARGET APP -->
                    <div class="application-compare-col">
                      <div style="font-weight: bold; font-size: 14px; margin-bottom: 15px;">
                        Target App: <span id="targetAppId">23423423</span>
                      </div>

                      <div style="margin-bottom: 15px;">
                        <div style="font-weight: bold; margin-bottom: 8px;">Applicant Information:</div>

                        <div style="margin-bottom: 4px; display: flex; align-items: center;">
                          <strong>Name:</strong>
                          <span id="targetAppName" style="margin-left: 5px;">AMANDA CLEO</span>
                          <i class="bi bi-x-circle-fill" style="font-size: 14px; margin-left: 8px; color: #d9534f;"></i>
                        </div>

                        <div style="margin-bottom: 4px; display: flex; align-items: center;">
                          <strong>SSN:</strong>
                          <span id="targetAppSSN" style="margin-left: 5px;">666-28-4361</span>
                          <i class="bi bi-x-circle-fill" style="font-size: 14px; margin-left: 8px; color: #d9534f;"></i>
                        </div>
                      </div>
                    </div>

                  </div> <!-- END OF ROW -->

                  <!-- BUTTONS BELOW BOTH COLUMNS -->
                  <div style="margin-top: 20px; display: flex; gap: 10px; position: relative;">
                    <button id="executeMoveBtn" class="btn btn-success" onclick="showExecuteMoveBubble()">Move</button>
                    <button class="btn btn-default" onclick="resetMoveWorkflow()">Reset</button>

                    <!-- Place bubble INSIDE this wrapper -->
                    <div id="executeMoveBubble" class="confirmation-bubble" style="display:none;">
                      <div id="executeMoveText">Move documents to application?</div>
                      <div style="margin-top: 10px; text-align: right;">
                        <button class="btn btn-sm" style="background-color: #6c757d; color: white; margin-right: 5px;"
                          onclick="cancelExecuteMove()">Cancel</button>
                        <button class="btn btn-sm" style="background-color: #5cb85c; color: white;"
                          onclick="confirmExecuteMove()">Confirm</button>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div style="background: white; border: 1px solid #ddd;">
              <table class="table table-striped" style="margin: 0;">
                <thead style="background: #f5f5f5;">
                  <tr>
                    <th style="width: 40px; padding: 12px 8px; border-bottom: 2px solid #ddd;">
                      <input id="approved-header-cb" type="checkbox" style="margin: 0;" title="Select/Deselect All">
                    </th>
                    <th style="padding: 12px; border-bottom: 2px solid #ddd; font-weight: bold;">Document</th>
                    <th style="padding: 12px; border-bottom: 2px solid #ddd; font-weight: bold;">Uploaded Date</th>
                    <th style="padding: 12px; border-bottom: 2px solid #ddd; font-weight: bold;">Approved Date</th>
                    <th style="padding: 12px; border-bottom: 2px solid #ddd; font-weight: bold;">Approved By</th>
                    <th style="padding: 12px; border-bottom: 2px solid #ddd; font-weight: bold; text-align: right;">
                      Actions</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td style="padding: 12px 8px; vertical-align: middle;">
                      <input class="approved-row-cb" type="checkbox" style="margin: 0;" aria-label="Select NSA">
                    </td>
                    <td style="padding: 12px; vertical-align: middle;">NSA</td>
                    <td style="padding: 12px; vertical-align: middle;">12/14/2025 12:30 AM</td>
                    <td style="padding: 12px; vertical-align: middle;">12/15/2025 12:30 AM</td>
                    <td style="padding: 12px; vertical-align: middle;">Jimmy K. John</td>
                    <td style="padding: 12px; vertical-align: middle; text-align: right;">
                      <a href="#" style="color: black; text-decoration: underline; margin-right: 10px;">View</a>
                      <a href="#" style="color: black; text-decoration: underline; margin-right: 10px;">Download</a>
                      <a href="#" style="color: black; text-decoration: underline; margin-right: 10px;"
                        onclick="toggleNoteRow(this, 'approved', 1)">Notes</a>
                      <a href="#" style="color: black; text-decoration: underline;">Deactivate</a>
                    </td>
                  </tr>
                  <tr class="note-row" id="note-row-approved-1" style="display: none;">
                    <td colspan="6" style="padding: 0; border: none;">
                      <div class="note-content" id="note-content-approved-1">
                        <!-- Note content will be populated by JavaScript -->
                      </div>
                    </td>
                  </tr>
                  <tr>
                    <td style="padding: 12px 8px; vertical-align: middle;">
                      <input class="approved-row-cb" type="checkbox" style="margin: 0;"
                        aria-label="Select Drivers License">
                    </td>
                    <td style="padding: 12px; vertical-align: middle;">Drivers License</td>
                    <td style="padding: 12px; vertical-align: middle;">12/14/2025 12:30 AM</td>
                    <td style="padding: 12px; vertical-align: middle;">12/15/2025 12:30 AM</td>
                    <td style="padding: 12px; vertical-align: middle;">Jimmy K. John</td>
                    <td style="padding: 12px; vertical-align: middle; text-align: right;">
                      <a href="#" style="color: black; text-decoration: underline; margin-right: 10px;">View</a>
                      <a href="#" style="color: black; text-decoration: underline; margin-right: 10px;">Download</a>
                      <a href="#" style="color: black; text-decoration: underline; margin-right: 10px;"
                        onclick="toggleNoteRow(this, 'approved', 2)">Notes</a>
                      <a href="#" style="color: black; text-decoration: underline;">Deactivate</a>
                    </td>
                  </tr>
                  <tr class="note-row" id="note-row-approved-2" style="display: none;">
                    <td colspan="6" style="padding: 0; border: none;">
                      <div class="note-content" id="note-content-approved-2">
                        <!-- Note content will be populated by JavaScript -->
                      </div>
                    </td>
                  </tr>
                  <tr>
                    <td style="padding: 12px 8px; vertical-align: middle;">
                      <input class="approved-row-cb" type="checkbox" style="margin: 0;"
                        aria-label="Select Insurance Card">
                    </td>
                    <td style="padding: 12px; vertical-align: middle;">Insurance Card</td>
                    <td style="padding: 12px; vertical-align: middle;">12/14/2025 12:30 AM</td>
                    <td style="padding: 12px; vertical-align: middle;">12/15/2025 12:30 AM</td>
                    <td style="padding: 12px; vertical-align: middle;">Jimmy K. John</td>
                    <td style="padding: 12px; vertical-align: middle; text-align: right;">
                      <a href="#" style="color: black; text-decoration: underline; margin-right: 10px;">View</a>
                      <a href="#" style="color: black; text-decoration: underline; margin-right: 10px;">Download</a>
                      <a href="#" style="color: black; text-decoration: underline; margin-right: 10px;"
                        onclick="toggleNoteRow(this, 'approved', 3)">Notes</a>
                      <a href="#" style="color: black; text-decoration: underline;">Deactivate</a>
                    </td>
                  </tr>
                  <tr class="note-row" id="note-row-approved-3" style="display: none;">
                    <td colspan="6" style="padding: 0; border: none;">
                      <div class="note-content" id="note-content-approved-3">
                        <!-- Note content will be populated by JavaScript -->
                      </div>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>

          <!-- Rejected Tab Content -->
          <div id="rejectedContent" style="display:none;">
            <div style="margin-bottom: 20px; text-align: right;">
              <div style="position: relative; display: inline-block; margin-right: 10px;">
                <button class="btn btn-default" id="requestReuploadBtn" onclick="showRequestReuploadBubble()"
                  style="border: 1px solid #2d5a2d; color: #2d5a2d; background-color: #d4e6d4; font-weight: bold;">Request
                  Customer to
                  Re-upload Rejected
                  Documents</button>
                <!-- Request Reupload Confirmation bubble -->
                <div id="requestReuploadBubble" class="confirmation-bubble" style="display:none;">
                  <div>Send re-upload request to customer for selected documents?</div>
                  <div style="margin-top: 10px; text-align: right;">
                    <button class="btn btn-sm" style="background-color: #6c757d; color: white; margin-right: 5px;"
                      onclick="cancelRequestReupload()">Cancel</button>
                    <button class="btn btn-sm" style="background-color: #5cb85c; color: white;"
                      onclick="executeRequestReupload()">Confirm</button>
                  </div>
                </div>
              </div>
              <div style="position: relative; display: inline-block;">
                <button class="btn btn-default" id="returnToPendingBtn" onclick="showReturnToPendingBubble()"
                  style="border: 1px solid #337ab7; color: #337ab7; background-color: #cce7ff; font-weight: bold;">Return
                  to Pending
                  Status</button>
                <!-- Return to Pending Confirmation bubble -->
                <div id="returnToPendingBubble" class="confirmation-bubble-right" style="display:none;">
                  <div>Return selected documents to pending status for review?</div>
                  <div style="margin-top: 10px; text-align: right;">
                    <button class="btn btn-sm" style="background-color: #6c757d; color: white; margin-right: 5px;"
                      onclick="cancelReturnToPending()">Cancel</button>
                    <button class="btn btn-sm" style="background-color: #5cb85c; color: white;"
                      onclick="executeReturnToPending()">Confirm</button>
                  </div>
                </div>
              </div>
            </div>

            <div style="background: white; border: 1px solid #ddd;">
              <table class="table table-striped" style="margin: 0;">
                <thead style="background: #f5f5f5;">
                  <tr>
                    <th style="width: 40px; padding: 12px 8px; border-bottom: 2px solid #ddd;">
                      <input id="rejected-header-cb" type="checkbox" style="margin: 0;" title="Select/Deselect All">
                    </th>
                    <th style="padding: 12px; border-bottom: 2px solid #ddd; font-weight: bold;">Document</th>
                    <th style="padding: 12px; border-bottom: 2px solid #ddd; font-weight: bold;">Uploaded Date</th>
                    <th style="padding: 12px; border-bottom: 2px solid #ddd; font-weight: bold;">Rejected Date</th>
                    <th style="padding: 12px; border-bottom: 2px solid #ddd; font-weight: bold;">Rejected By</th>
                    <th style="padding: 12px; border-bottom: 2px solid #ddd; font-weight: bold;">Re-upload Request
                      Sent</th>
                    <th style="padding: 12px; border-bottom: 2px solid #ddd; font-weight: bold; text-align: right;">
                      Actions</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td style="padding: 12px 8px; vertical-align: middle;">
                      <input class="rejected-row-cb" type="checkbox" style="margin: 0;" aria-label="Select Document A">
                    </td>
                    <td style="padding: 12px; vertical-align: middle;">Document_A.pdf</td>
                    <td style="padding: 12px; vertical-align: middle;">12/14/2025 12:30 AM</td>
                    <td style="padding: 12px; vertical-align: middle;">12/15/2025 12:30 AM</td>
                    <td style="padding: 12px; vertical-align: middle;">Jimmy K. John</td>
                    <td style="padding: 12px; vertical-align: middle; text-align: center;">
                      <span
                        style="background-color: #5cb85c; color: white; padding: 3px 8px; border-radius: 4px; font-size: 11px; font-weight: bold;">Yes</span>
                    </td>
                    <td style="padding: 12px; vertical-align: middle; text-align: right;">
                      <a href="#" style="color: black; text-decoration: underline; margin-right: 10px;">View</a>
                      <a href="#" style="color: black; text-decoration: underline; margin-right: 10px;">Download</a>
                      <a href="#" style="color: black; text-decoration: underline;"
                        onclick="toggleNoteRow(this, 'rejected', 1)">Notes</a>
                    </td>
                  </tr>
                  <tr class="note-row" id="note-row-rejected-1" style="display: none;">
                    <td colspan="7" style="padding: 0; border: none;">
                      <div class="note-content" id="note-content-rejected-1">
                        <!-- Note content will be populated by JavaScript -->
                      </div>
                    </td>
                  </tr>
                  <tr>
                    <td style="padding: 12px 8px; vertical-align: middle;">
                      <input class="rejected-row-cb" type="checkbox" style="margin: 0;" aria-label="Select Document B">
                    </td>
                    <td style="padding: 12px; vertical-align: middle;">Document_B.pdf</td>
                    <td style="padding: 12px; vertical-align: middle;">12/14/2025 12:30 AM</td>
                    <td style="padding: 12px; vertical-align: middle;">12/15/2025 12:30 AM</td>
                    <td style="padding: 12px; vertical-align: middle;">Jimmy K. John</td>
                    <td style="padding: 12px; vertical-align: middle; text-align: center;">
                      <span
                        style="background-color: #d9534f; color: white; padding: 3px 8px; border-radius: 4px; font-size: 11px; font-weight: bold;">No</span>
                    </td>
                    <td style="padding: 12px; vertical-align: middle; text-align: right;">
                      <a href="#" style="color: black; text-decoration: underline; margin-right: 10px;">View</a>
                      <a href="#" style="color: black; text-decoration: underline; margin-right: 10px;">Download</a>
                      <a href="#" style="color: black; text-decoration: underline;"
                        onclick="toggleNoteRow(this, 'rejected', 2)">Notes</a>
                    </td>
                  </tr>
                  <tr class="note-row" id="note-row-rejected-2" style="display: none;">
                    <td colspan="7" style="padding: 0; border: none;">
                      <div class="note-content" id="note-content-rejected-2">
                        <!-- Note content will be populated by JavaScript -->
                      </div>
                    </td>
                  </tr>
                  <tr>
                    <td style="padding: 12px 8px; vertical-align: middle;">
                      <input class="rejected-row-cb" type="checkbox" style="margin: 0;" aria-label="Select Document C">
                    </td>
                    <td style="padding: 12px; vertical-align: middle;">Document_C.pdf</td>
                    <td style="padding: 12px; vertical-align: middle;">12/14/2025 12:30 AM</td>
                    <td style="padding: 12px; vertical-align: middle;">12/15/2025 12:30 AM</td>
                    <td style="padding: 12px; vertical-align: middle;">Jimmy K. John</td>
                    <td style="padding: 12px; vertical-align: middle; text-align: center;">
                      <span
                        style="background-color: #5cb85c; color: white; padding: 3px 8px; border-radius: 4px; font-size: 11px; font-weight: bold;">Yes</span>
                    </td>
                    <td style="padding: 12px; vertical-align: middle; text-align: right;">
                      <a href="#" style="color: black; text-decoration: underline; margin-right: 10px;">View</a>
                      <a href="#" style="color: black; text-decoration: underline; margin-right: 10px;">Download</a>
                      <a href="#" style="color: black; text-decoration: underline;"
                        onclick="toggleNoteRow(this, 'rejected', 3)">Notes</a>
                    </td>
                  </tr>
                  <tr class="note-row" id="note-row-rejected-3" style="display: none;">
                    <td colspan="7" style="padding: 0; border: none;">
                      <div class="note-content" id="note-content-rejected-3">
                        <!-- Note content will be populated by JavaScript -->
                      </div>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>

        </div>
      </div>
    </div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.0.0/js/bootstrap.min.js"></script>
    <script>
      // simulate tab switching purely for UI (no ajax)
      $(function () {
        $('.nav-tabs a').on('click', function (e) {
          e.preventDefault();
          $('.nav-tabs li').removeClass('active');
          $(this).parent().addClass('active');

          // Get the tab text to determine which content to show
          var tabText = $(this).text().trim();

          // Hide all content divs
          $('#pendingContent, #approvedContent, #rejectedContent').hide();

          // Show appropriate content based on tab
          if (tabText.includes('Pending')) {
            $('#pendingContent').show();
          } else if (tabText.includes('Approved')) {
            $('#approvedContent').show();
          } else if (tabText.includes('Rejected')) {
            $('#rejectedContent').show();
          }

          // Reset any active workflows when switching tabs
          resetAllUI();
        });

        // Handle rejection reason dropdown change
        $('#rejectionReasonSelect').on('change', function () {
          var selectedText = $(this).find('option:selected').text();
          var selectedValue = $(this).val();

          if (selectedValue && selectedText !== 'Select a rejection reason...' && selectedText !== 'Other') {
            // Populate both note fields with the selected reason text
            $('#funderNoteReject').val(selectedText);
            $('#customerNoteReject').val(selectedText);
          } else {
            // Clear both note fields if no valid selection
            $('#funderNoteReject').val('');
            $('#customerNoteReject').val('');
          }
        });

        // Function to reset all UI elements
        function resetAllUI() {
          $('#rejectOptions').slideUp();
          $('#approveOptions').slideUp();
          $('#rejectBtn').text('Reject');
          $('#approveBtn').text('Approve');
          $('#cancelBtn').hide();

          // Clear all form fields
          $('#rejectionReasonSelect').val('');
          $('#funderNoteReject').val('');
          $('#customerNoteReject').val('');
          $('#funderNoteApprove').val('');
        }

        // Handle reject button click
        $('#rejectBtn').on('click', function () {
          var $btn = $(this);
          var $options = $('#rejectOptions');
          var $cancelBtn = $('#cancelBtn');
          var $approveBtn = $('#approveBtn');

          if ($btn.text() === 'Reject') {
            // Reset approve workflow if it was active
            if ($approveBtn.text() === 'Confirm Approve') {
              $('#approveOptions').slideUp();
              $approveBtn.text('Approve');
              $('#funderNoteApprove').val('');
            }

            // Show reject options
            $options.slideDown();
            $btn.text('Confirm Reject');
            $cancelBtn.show();
          } else {
            // Handle confirm reject
            var selectedReason = $('#rejectionReasonSelect').val();
            var funderNote = $('#funderNoteReject').val().trim();
            var customerNote = $('#customerNoteReject').val().trim();

            if (!selectedReason) {
              return;
            }

            if (!funderNote || !customerNote) {
              return;
            }

            // Reset all UI after successful rejection
            resetAllUI();
          }
        });

        // Handle approve button click
        $('#approveBtn').on('click', function () {
          var $btn = $(this);
          var $options = $('#approveOptions');
          var $cancelBtn = $('#cancelBtn');
          var $rejectBtn = $('#rejectBtn');

          if ($btn.text() === 'Approve') {
            // Reset reject workflow if it was active
            if ($rejectBtn.text() === 'Confirm Reject') {
              $('#rejectOptions').slideUp();
              $rejectBtn.text('Reject');
              $('#rejectionReasonSelect').val('');
              $('#funderNoteReject').val('');
              $('#customerNoteReject').val('');
            }

            // Show approve options
            $options.slideDown();
            $btn.text('Confirm Approve');
            $cancelBtn.show();
          } else {
            // Handle confirm approve
            var funderNote = $('#funderNoteApprove').val().trim();

            // Reset all UI after successful approval
            resetAllUI();
          }
        });

        // Handle cancel button click
        $('#cancelBtn').on('click', function () {
          resetAllUI();
        });

        // Confirmation bubble functions for Approved section
        window.showMoveDocuments = function () {
          const selectedCount = document.querySelectorAll('.approved-row-cb:checked').length;
          if (selectedCount === 0) return;

          // Update the title with selected count
          const title = document.getElementById('moveDocumentsTitle');
          title.textContent = `Move ${selectedCount} document(s) to a new application.`;

          // Show the move section
          const moveSection = document.getElementById('moveDocumentsSection');
          moveSection.style.display = 'block';

          // Focus on the input field
          const targetAppInput = document.getElementById('targetApplicationId');
          targetAppInput.focus();

          // Scroll to the section
          moveSection.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        };

        window.validateApplication = function () {
          const targetAppInput = document.getElementById('targetApplicationId');
          const appId = targetAppInput.value.trim();

          if (!appId) {
            return;
          }

          // Update the target app ID in the comparison
          document.getElementById('targetAppId').textContent = appId;

          // Show the comparison section
          document.getElementById('applicationComparisonSection').style.display = 'block';
        };

        window.resetMoveWorkflow = function () {
          document.getElementById('targetApplicationId').value = '';
          document.getElementById('applicationComparisonSection').style.display = 'none';
        };

        window.showExecuteMoveBubble = function () {
          const selectedCount = document.querySelectorAll('.approved-row-cb:checked').length;
          const targetAppId = document.getElementById('targetAppId').textContent;

          // Update bubble text
          document.getElementById('executeMoveText').textContent =
            `Move ${selectedCount} document(s) to application ${targetAppId}?`;

          const bubble = document.getElementById('executeMoveBubble');
          bubble.style.display = 'block';
          setTimeout(() => bubble.classList.add('show'), 10);
        };

        window.cancelExecuteMove = function () {
          const bubble = document.getElementById('executeMoveBubble');
          bubble.classList.remove('show');
          setTimeout(() => bubble.style.display = 'none', 300);
        };

        window.confirmExecuteMove = function () {
          const selectedCount = document.querySelectorAll('.approved-row-cb:checked').length;
          const targetAppId = document.getElementById('targetAppId').textContent;

          // Hide bubble
          const bubble = document.getElementById('executeMoveBubble');
          bubble.classList.remove('show');
          setTimeout(() => bubble.style.display = 'none', 300);

          // Hide move section
          document.getElementById('moveDocumentsSection').style.display = 'none';

          // Reset form
          resetMoveWorkflow();

          // Uncheck all selected documents
          document.querySelectorAll('.approved-row-cb:checked').forEach(cb => cb.checked = false);

          // Update button states
          updateButtonStates('approved', 0);
          document.getElementById('approved-selected').textContent = 'Selected: 0 of 3';
          document.getElementById('approved-header-cb').checked = false;
        };

        window.showMoveDocumentsBubble = function () {
          // Ensure move workflow panel is hidden first
          document.getElementById('moveDocumentsSection').style.display = 'none';

          const selectedCount = document.querySelectorAll('.approved-row-cb:checked').length;
          document.getElementById('moveDocumentsText').textContent =
            `Move ${selectedCount} selected document(s) to another application?`;

          const bubble = document.getElementById('moveDocumentsBubble');
          bubble.style.display = 'block';
          setTimeout(() => bubble.classList.add('show'), 10);
        };


        window.cancelMoveDocuments = function () {
          const bubble = document.getElementById('moveDocumentsBubble');
          bubble.classList.remove('show');
          setTimeout(() => bubble.style.display = 'none', 300);

          // Also hide the move section if it's open
          document.getElementById('moveDocumentsSection').style.display = 'none';
          resetMoveWorkflow();
        };

        window.executeMoveDocuments = function () {
          const bubble = document.getElementById('moveDocumentsBubble');
          bubble.classList.remove('show');
          setTimeout(() => bubble.style.display = 'none', 300);

          // Show the detailed move workflow
          showMoveDocuments();
        };

        window.showReturnToFaxesBubble = function () {
          const selectedCount = document.querySelectorAll('.approved-row-cb:checked').length;
          const bubble = document.getElementById('returnToFaxesBubble');
          bubble.style.display = 'block';
          setTimeout(() => bubble.classList.add('show'), 10);
        };

        window.cancelReturnToFaxes = function () {
          const bubble = document.getElementById('returnToFaxesBubble');
          bubble.classList.remove('show');
          setTimeout(() => bubble.style.display = 'none', 300);
        };

        window.executeReturnToFaxes = function () {
          const selectedCount = document.querySelectorAll('.approved-row-cb:checked').length;
          const bubble = document.getElementById('returnToFaxesBubble');
          bubble.classList.remove('show');
          setTimeout(() => bubble.style.display = 'none', 300);

          // Uncheck all and update states
          document.querySelectorAll('.approved-row-cb:checked').forEach(cb => cb.checked = false);
          updateButtonStates('approved', 0);
          document.getElementById('approved-selected').textContent = 'Selected: 0 of 3';
          document.getElementById('approved-header-cb').checked = false;
        };

        // Confirmation bubble functions for Rejected section
        window.showRequestReuploadBubble = function () {
          const selectedCount = document.querySelectorAll('.rejected-row-cb:checked').length;
          const bubble = document.getElementById('requestReuploadBubble');
          bubble.style.display = 'block';
          setTimeout(() => bubble.classList.add('show'), 10);
        };

        window.cancelRequestReupload = function () {
          const bubble = document.getElementById('requestReuploadBubble');
          bubble.classList.remove('show');
          setTimeout(() => bubble.style.display = 'none', 300);
        };

        window.executeRequestReupload = function () {
          const selectedCount = document.querySelectorAll('.rejected-row-cb:checked').length;
          const bubble = document.getElementById('requestReuploadBubble');
          bubble.classList.remove('show');
          setTimeout(() => bubble.style.display = 'none', 300);

          // Uncheck all and update states
          document.querySelectorAll('.rejected-row-cb:checked').forEach(cb => cb.checked = false);
          updateButtonStates('rejected', 0);
          document.getElementById('rejected-selected').textContent = 'Selected: 0 of 3';
          document.getElementById('rejected-header-cb').checked = false;
        };

        window.showReturnToPendingBubble = function () {
          const selectedCount = document.querySelectorAll('.rejected-row-cb:checked').length;
          const bubble = document.getElementById('returnToPendingBubble');
          bubble.style.display = 'block';
          setTimeout(() => bubble.classList.add('show'), 10);
        };

        window.cancelReturnToPending = function () {
          const bubble = document.getElementById('returnToPendingBubble');
          bubble.classList.remove('show');
          setTimeout(() => bubble.style.display = 'none', 300);
        };

        window.executeReturnToPending = function () {
          const selectedCount = document.querySelectorAll('.rejected-row-cb:checked').length;
          const bubble = document.getElementById('returnToPendingBubble');
          bubble.classList.remove('show');
          setTimeout(() => bubble.style.display = 'none', 300);

          // Uncheck all and update states
          document.querySelectorAll('.rejected-row-cb:checked').forEach(cb => cb.checked = false);
          updateButtonStates('rejected', 0);
          document.getElementById('rejected-selected').textContent = 'Selected: 0 of 3';
          document.getElementById('rejected-header-cb').checked = false;
        };

        // Sample notes data
        const notesData = {
          approved: {
            'NSA': 'Document verified successfully. All required signatures present and legible. Cross-referenced with customer application data - all information matches. Document quality excellent, no issues detected.',
            'Drivers License': 'Valid driver\'s license verified through DMV database. Photo matches customer profile. Address information confirmed against application. No security features compromised.',
            'Insurance Card': 'Insurance card verified with carrier. Policy active and in good standing. Coverage amounts meet lending requirements. Effective dates cover loan period.'
          },
          rejected: {
            'Document_A.pdf': 'Document rejected due to poor image quality. Text is illegible and signatures cannot be verified. Customer needs to provide a clearer scan or photo.',
            'Document_B.pdf': 'Social Security card appears to be altered or tampered with. Security features do not match authentic SSN card specifications. Possible forgery detected. Escalated to fraud prevention team.',
            'Document_C.pdf': 'Bank statement is outdated - more than 90 days old. Current policy requires statements within 60 days of application.'
          }
        };

        // Toggle note row functionality
        window.toggleNoteRow = function (link, section, rowIndex) {
          const noteRow = document.getElementById(`note-row-${section}-${rowIndex}`);
          const noteContent = document.getElementById(`note-content-${section}-${rowIndex}`);

          // Hide all other note rows
          document.querySelectorAll('.note-row').forEach(row => {
            if (row !== noteRow && row.style.display !== 'none') {
              row.style.display = 'none';
              const content = row.querySelector('.note-content');
              if (content) {
                content.classList.remove('show');
              }
            }
          });

          if (noteRow.style.display === 'none' || noteRow.style.display === '') {
            // Show note row
            noteRow.style.display = 'table-row';

            // Get document name from the row
            const row = link.closest('tr');
            const docName = row.cells[1].textContent.trim();
            const noteText = notesData[section] && notesData[section][docName];

            // Populate content
            noteContent.textContent = noteText || 'No notes available for this document.';

            // Show with animation
            setTimeout(() => {
              noteContent.classList.add('show');
            }, 10);
          } else {
            // Hide note row
            noteContent.classList.remove('show');
            setTimeout(() => {
              noteRow.style.display = 'none';
            }, 300);
          }
        };

        // Checkbox functionality
        function setupCheckboxes(section) {
          const headerCheckbox = document.getElementById(`${section}-header-cb`);
          const rowCheckboxes = document.querySelectorAll(`.${section}-row-cb`);
          const selectedCounter = document.getElementById(`${section}-selected`);

          if (!headerCheckbox) return;

          function updateButtonStates(checkedCount) {
            const isEnabled = checkedCount > 0;

            if (section === 'approved') {
              const moveBtn = document.getElementById('moveDocumentsBtn');
              const returnBtn = document.getElementById('returnToFaxesBtn');

              if (moveBtn) {
                moveBtn.disabled = !isEnabled;
                moveBtn.style.opacity = isEnabled ? '1' : '0.6';
                moveBtn.onclick = isEnabled ? showMoveDocuments : null;
              }
              if (returnBtn) {
                returnBtn.disabled = !isEnabled;
                returnBtn.style.opacity = isEnabled ? '1' : '0.6';
                returnBtn.onclick = isEnabled ? showReturnToFaxesBubble : null;
              }
            }

            if (section === 'rejected') {
              const reuploadBtn = document.getElementById('requestReuploadBtn');
              const returnBtn = document.getElementById('returnToPendingBtn');

              if (reuploadBtn) {
                reuploadBtn.disabled = !isEnabled;
                reuploadBtn.style.opacity = isEnabled ? '1' : '0.6';
                reuploadBtn.onclick = isEnabled ? showRequestReuploadBubble : null;
              }
              if (returnBtn) {
                returnBtn.disabled = !isEnabled;
                returnBtn.style.opacity = isEnabled ? '1' : '0.6';
                returnBtn.onclick = isEnabled ? showReturnToPendingBubble : null;
              }
            }
          }

          function updateHeaderState() {
            const total = rowCheckboxes.length;
            const checkedCount = Array.from(rowCheckboxes).filter(cb => cb.checked).length;

            // Update header checkbox state
            if (checkedCount === total && total > 0) {
              headerCheckbox.checked = true;
              headerCheckbox.indeterminate = false;
            } else if (checkedCount > 0) {
              headerCheckbox.checked = false;
              headerCheckbox.indeterminate = true;
            } else {
              headerCheckbox.checked = false;
              headerCheckbox.indeterminate = false;
            }

            // Update counter
            if (selectedCounter) {
              selectedCounter.textContent = `Selected: ${checkedCount} of ${total}`;
            }

            // Update button states
            updateButtonStates(checkedCount);
          }

          // Header checkbox handler
          headerCheckbox.addEventListener('change', function () {
            rowCheckboxes.forEach(cb => {
              cb.checked = this.checked;
            });
            updateHeaderState();
          });

          // Row checkbox handlers
          rowCheckboxes.forEach(cb => {
            cb.addEventListener('change', updateHeaderState);
          });

          // Initial update
          updateHeaderState();
        }

        // Initialize checkboxes when DOM is loaded
        $(document).ready(function () {
          setupCheckboxes('approved');
          setupCheckboxes('rejected');
        });
      });
    </script>
</body>

</html>